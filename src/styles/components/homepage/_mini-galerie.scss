// ============================================================
// SECTION MINI GALERIE — SOFICRAFT
// Strip horizontal scrollable avec photos tailles variées
// Certaines images chevauchent le texte d'intro
// Chemin : styles/components/homepage/_mini-galerie.scss
// ============================================================

@use "sass:color";
@use "../../abstracts/variables" as *;
@use "../../abstracts/mixins" as *;

// ----------------------------------------------------------
// SECTION WRAPPER
// ----------------------------------------------------------
.mini-galerie {
    position: relative;
    width: 100%;
    background-color: $color-neutral-bg; // Beige Très Clair #F5E6D3
    padding-top: $space-3xl;
    padding-bottom: $space-2xl;
    overflow: hidden;

    @include respond-to("md") {
        padding-top: $space-4xl;
        padding-bottom: $space-3xl;
    }

    @include respond-to("lg") {
        padding-top: 7rem;
        padding-bottom: $space-4xl;
    }

    // ----------------------------------------------------------
    // HEADER — z-index bas pour permettre le chevauchement
    // ----------------------------------------------------------
    &__header {
        @include container;
        position: relative;
        z-index: 1; //
        margin-bottom: $space-lg;

        @include respond-to("md") {
            margin-bottom: $space-md;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        @include respond-to("lg") {
            max-width: 550px;
            margin-left: $container-padding;
            margin-right: auto;
            text-align: left;
        }
    }

    &__pretitle {
        display: inline-block;
        font-family: $font-primary;
        font-size: $fs-sm;
        font-weight: $fw-semibold;
        color: $color-secondary-green;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        margin-bottom: $space-md;
    }

    &__title {
        font-family: $font-secondary; // Imperial Script
        font-weight: $fw-normal;
        color: $color-neutral-dark;
        line-height: $lh-tight;
        margin: 0 0 $space-lg 0;
        font-size: clamp(1.8rem, 5vw, 2.4rem);

        @include respond-to("md") {
            font-size: clamp(2rem, 3.5vw, 2.8rem);
        }
    }

    &__intro {
        font-family: $font-primary;
        font-size: $fs-md;
        font-weight: $fw-normal;
        color: $color-primary-dark;
        line-height: $lh-relaxed;
        font-style: italic;
    }

    // ----------------------------------------------------------
    // WRAPPER — Conteneur de scroll
    // ----------------------------------------------------------
    &__wrapper {
        position: relative;
        z-index: 2; //
        width: 100%;
        overflow: visible;
        cursor: grab;
        user-select: none;

        @media (hover: none) {
            overflow-x: auto;
            overflow-y: visible;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            &::-webkit-scrollbar {
                display: none;
            }
        }
    }

    // ----------------------------------------------------------
    // TRACK — Piste des photos
    // ----------------------------------------------------------
    &__track {
        display: flex;
        align-items: center;
        gap: $space-lg;
        padding-left: $container-padding;
        padding-right: $space-3xl;
        will-change: transform;
        margin-top: -$space-xl;

        @include respond-to("md") {
            gap: $space-xl;
            margin-top: -$space-3xl;
            padding-left: $space-3xl;
        }

        @include respond-to("lg") {
            margin-top: -$space-4xl;
            padding-left: 35%;
        }
    }

    // ----------------------------------------------------------
    // ITEM — Photo individuelle
    // ----------------------------------------------------------
    &__item {
        flex-shrink: 0;
        position: relative;
        overflow: hidden;
        border-radius: $radius-sm;
        transition: transform $transition-slow;

        &:hover {
            .mini-galerie__item-info {
                opacity: 1;
                transform: translateY(0);
            }
        }

        // ---- Tailles variées ----
        &--tall {
            width: 220px;
            height: 340px;
            @include respond-to("md") {
                width: 280px;
                height: 420px;
            }
            @include respond-to("lg") {
                width: 300px;
                height: 460px;
            }
        }

        &--wide {
            width: 320px;
            height: 220px;
            @include respond-to("md") {
                width: 400px;
                height: 280px;
            }
            @include respond-to("lg") {
                width: 440px;
                height: 300px;
            }
        }

        &--square {
            width: 240px;
            height: 240px;
            @include respond-to("md") {
                width: 300px;
                height: 300px;
            }
            @include respond-to("lg") {
                width: 340px;
                height: 340px;
            }
        }

        &--large {
            width: 300px;
            height: 380px;
            @include respond-to("md") {
                width: 380px;
                height: 480px;
            }
            @include respond-to("lg") {
                width: 420px;
                height: 520px;
            }
        }

        &--xlarge {
            // Ajout de la taille xlarge
            width: 340px;
            height: 440px;
            @include respond-to("md") {
                width: 440px;
                height: 560px;
            }
            @include respond-to("lg") {
                width: 500px;
                height: 640px;
            }
        }

        // ---- Décalages verticaux ----
        &--up {
            align-self: flex-start;
        }
        &--down {
            align-self: flex-end;
            @include respond-to("md") {
                margin-top: $space-4xl;
            }
        }
        &--none {
            align-self: center;
        }
    }

    // ---- Image & Placeholders ----
    &__item-image {
        width: 100%;
        height: 100%;
        overflow: hidden;
        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .mini-galerie__item:hover & img {
            transform: scale(1.05);
        }
    }

    &__item-placeholder {
        width: 100%;
        height: 100%;
        transition: transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);

        .mini-galerie__item--tall & {
            background: linear-gradient(
                170deg,
                color.adjust($color-primary-med, $lightness: -5%) 0%,
                $color-primary-light 100%
            );
        }
        .mini-galerie__item--wide & {
            background: linear-gradient(
                120deg,
                $color-primary-dark 0%,
                color.adjust($color-primary-med, $lightness: 5%) 100%
            );
        }
        .mini-galerie__item--square & {
            background: linear-gradient(
                145deg,
                $color-secondary-green 0%,
                color.adjust($color-primary-dark, $lightness: 5%) 100%
            );
        }
        .mini-galerie__item--large & {
            background: linear-gradient(
                160deg,
                color.adjust($color-primary-darker, $lightness: 5%) 0%,
                $color-secondary-green 100%
            );
        }
        .mini-galerie__item--xlarge & {
            background: linear-gradient(
                135deg,
                color.adjust($color-primary-med, $lightness: -10%) 0%,
                color.adjust($color-secondary-green, $lightness: 10%) 100%
            );
        }

        .mini-galerie__item:hover & {
            transform: scale(1.05);
        }
    }

    // ---- Info hover ----
    &__item-info {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: $space-lg;
        background: linear-gradient(
            to top,
            rgba($color-neutral-dark, 0.7) 0%,
            transparent 100%
        );
        display: flex;
        flex-direction: column;
        gap: $space-xs;
        opacity: 0;
        transform: translateY(8px);
        transition:
            opacity $transition-normal,
            transform $transition-normal;
        pointer-events: none;
    }

    &__item-category {
        font-family: $font-primary;
        font-size: $fs-xs;
        font-weight: $fw-semibold;
        color: $color-primary-light;
        letter-spacing: 0.15em;
        text-transform: uppercase;
    }

    &__item-title {
        font-family: $font-secondary;
        font-size: $fs-lg;
        color: $color-neutral-light;
    }

    // ----------------------------------------------------------
    // CTA CARD & SCROLL HINT
    // ----------------------------------------------------------
    &__cta-card {
        flex-shrink: 0;
        width: 200px;
        height: 280px;
        @include flex-center;
        @include respond-to("md") {
            width: 260px;
            height: 360px;
        }
    }

    &__cta {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: $space-lg;
        text-decoration: none;
        color: $color-primary-dark;
        &:hover {
            color: $color-secondary-green;
            .mini-galerie__cta-arrow {
                transform: translateX(6px);
            }
            .mini-galerie__cta-text::after {
                width: 100%;
            }
        }
    }

    &__cta-text {
        font-family: $font-primary;
        font-size: $fs-md;
        font-weight: $fw-semibold;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        position: relative;
        &::after {
            content: "";
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 1px;
            background-color: $color-secondary-green;
            transition: width $transition-slow;
        }
    }

    &__scroll-hint {
        display: flex;
        align-items: center;
        gap: $space-md;
        justify-content: center;
        margin-top: $space-xl;
        @include respond-to("md") {
            margin-top: $space-2xl;
        }
        @include respond-to("xl") {
            opacity: 0.5;
        }
    }

    &__scroll-hint-line {
        display: block;
        width: 40px;
        height: 1px;
        background-color: $color-primary-dark;
        opacity: 0.3;
        animation: scrollHintPulse 2s ease-in-out infinite;
    }

    &__scroll-hint-text {
        font-family: $font-primary;
        font-size: $fs-xs;
        color: $color-primary-dark;
        opacity: 0.4;
        letter-spacing: 0.1em;
        text-transform: uppercase;
    }
}

@keyframes scrollHintPulse {
    0%,
    100% {
        width: 40px;
        opacity: 0.3;
    }
    50% {
        width: 60px;
        opacity: 0.5;
    }
}
