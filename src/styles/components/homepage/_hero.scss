// ============================================================
// HERO SECTION — SOFICRAFT
// Fullscreen 100vh | Parallax background | Split text reveal
// Mobile-first responsive
// ============================================================

@use "sass:color";
@use "../../abstracts/variables" as *;
@use "../../abstracts/mixins" as *;

// ----------------------------------------------------------
// HERO — Section wrapper (100vh)
// ----------------------------------------------------------
.hero {
    position: relative;
    width: 100%;
    height: 100vh;
    height: 100dvh; // Dynamic viewport pour iOS Safari
    overflow: hidden;
    @include flex-center;

    // ----------------------------------------------------------
    // BACKGROUND — Image + overlay
    // ----------------------------------------------------------
    &__background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 120%; // Légèrement plus grand pour le parallax
        z-index: 1;
        will-change: transform; // Performance hint pour GSAP parallax

        // PLACEHOLDER — Gradient simulant forêt enchantée
        // Remplacer par l'image réelle quand disponible
        background:
            radial-gradient(
                ellipse at 30% 20%,
                rgba(77, 107, 61, 0.3) 0%,
                // Vert Forêt
                transparent 50%
            ),
            radial-gradient(
                ellipse at 70% 60%,
                rgba(212, 184, 150, 0.15) 0%,
                // Beige Sable
                transparent 50%
            ),
            linear-gradient(
                175deg,
                color.scale($color-neutral-dark, $lightness: -5%) 0%,
                $color-neutral-dark 25%,
                color.scale($color-primary-light, $lightness: -30%) 50%,
                color.scale($color-secondary-green, $lightness: -20%) 75%,
                $color-neutral-dark 100%
            );
        background-size: cover;
        background-position: center;

        // L'image réelle sera en position absolute dans le composant
        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    }

    &__background-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 2;

        // Overlay gradient pour lisibilité du texte
        background:
      // Gradient central sombre pour texte
            radial-gradient(
                ellipse at center 40%,
                rgba($color-neutral-dark, 0.4) 0%,
                rgba($color-neutral-dark, 0.1) 70%
            ),
            // Gradient bas pour transition vers section suivante
            linear-gradient(
                    to bottom,
                    rgba($color-neutral-dark, 0.2) 0%,
                    rgba($color-neutral-dark, 0.05) 40%,
                    rgba($color-neutral-dark, 0.1) 70%,
                    rgba($color-neutral-dark, 0.7) 100%
                );
    }

    &__background-slide {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        will-change: opacity;

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    }

    // ----------------------------------------------------------
    // CONTENT — Texte centré
    // ----------------------------------------------------------
    &__content {
        position: relative;
        z-index: 10;
        @include flex-column;
        align-items: center;
        text-align: center;
        padding-inline: $space-lg;
        max-width: 800px;

        @include respond-to("md") {
            padding-inline: $space-2xl;
            max-width: 900px;
        }

        @include respond-to("lg") {
            max-width: 1000px;
        }
    }

    // ----------------------------------------------------------
    // PRÉ-TITRE — Petite accroche au-dessus du H1
    // ----------------------------------------------------------
    &__pretitle {
        font-family: $font-primary; // Cormorant Garamond
        font-size: $fs-sm;
        font-weight: 400;
        color: $color-primary-light;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        margin-bottom: $space-lg;
        opacity: 0.8;

        @include respond-to("md") {
            font-size: $fs-base;
            letter-spacing: 0.25em;
        }
    }

    // ----------------------------------------------------------
    // TITRE H1 — Imperial Script / Great Vibes
    // Split Text (chaque mot est un <span>)
    // ----------------------------------------------------------
    &__title {
        font-family: $font-secondary;
        font-weight: 400;
        color: $color-neutral-light;
        line-height: 1.2;
        margin: 0;
        perspective: 600px; // Pour l'effet rotateX GSAP

        // Mobile
        font-size: clamp(2rem, 8vw, 2.5rem);

        // Tablet
        @include respond-to("md") {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            line-height: 1.25;
        }

        // Desktop — 64px comme spécifié dans le Sitemap
        @include respond-to("lg") {
            font-size: clamp(3rem, 4vw, 4rem);
        }
    }

    &__title-word {
        display: inline-block; // Nécessaire pour GSAP transform par mot
        will-change: transform, opacity;
    }

    // ----------------------------------------------------------
    // LIGNE DÉCORATIVE — Séparateur élégant
    // ----------------------------------------------------------
    &__decor-line {
        display: block;
        width: 60px;
        height: 1px;
        background: linear-gradient(
            90deg,
            transparent 0%,
            $color-primary-light 50%,
            transparent 100%
        );
        margin-block: $space-lg;
        transform-origin: center;

        @include respond-to("md") {
            width: 80px;
            margin-block: $space-xl;
        }
    }

    // ----------------------------------------------------------
    // SOUS-TITRE — Texte émotionnel
    // ----------------------------------------------------------
    &__subtitle {
        font-family: $font-primary; // Cormorant Garamond
        font-size: $fs-md; // 18px
        font-weight: 400;
        font-style: italic;
        color: rgba($color-neutral-light, 0.85);
        line-height: 1.7;
        max-width: 560px;
        margin: 0;

        @include respond-to("md") {
            font-size: $fs-lg; // 24px
            line-height: 1.8;
            max-width: 640px;
        }
    }

    // ----------------------------------------------------------
    // CTA — Boutons d'action
    // ----------------------------------------------------------
    &__cta-container {
        @include flex-column;
        align-items: center;
        gap: $space-md;
        margin-top: $space-2xl;

        @include respond-to("sm") {
            flex-direction: row;
            gap: $space-lg;
        }
    }

    &__cta {
        // Le bouton primaire utilise .btn .btn-primary du design system

        // Variante secondaire — lien texte avec flèche
        &--secondary {
            font-family: $font-primary;
            font-size: $fs-base;
            font-weight: 500;
            color: $color-neutral-light;
            text-decoration: none;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            gap: $space-sm;
            padding-block: $space-sm;
            position: relative;
            transition:
                color 0.3s ease,
                gap 0.3s ease;

            &::after {
                content: "";
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 1px;
                background-color: rgba($color-neutral-light, 0.3);
                transition: background-color 0.3s ease;
            }

            &:hover {
                color: $color-primary-light;
                gap: $space-md;

                &::after {
                    background-color: $color-primary-light;
                }
            }
        }
    }

    &__cta-arrow {
        transition: transform 0.3s ease;

        .hero__cta--secondary:hover & {
            transform: translateX(4px);
        }
    }

    // ----------------------------------------------------------
    // SCROLL INDICATOR — Bas de page
    // ----------------------------------------------------------
    &__scroll-indicator {
        position: absolute;
        bottom: $space-xl;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        @include flex-column;
        align-items: center;
        gap: $space-sm;

        // Masqué sur très petits écrans
        display: none;

        @include respond-to("sm") {
            display: flex;
        }
    }

    &__scroll-text {
        font-family: $font-primary;
        font-size: $fs-xs;
        color: rgba($color-neutral-light, 0.5);
        letter-spacing: 0.15em;
        text-transform: uppercase;
    }

    &__scroll-line {
        display: block;
        width: 1px;
        height: 40px;
        background: linear-gradient(
            to bottom,
            rgba($color-neutral-light, 0.4),
            transparent
        );
        animation: scrollPulse 2s ease-in-out infinite;

        @include respond-to("md") {
            height: 50px;
        }
    }
}

// ----------------------------------------------------------
// KEYFRAMES
// ----------------------------------------------------------
@keyframes scrollPulse {
    0%,
    100% {
        opacity: 0.3;
        transform: scaleY(0.6);
        transform-origin: top;
    }
    50% {
        opacity: 0.8;
        transform: scaleY(1);
    }
}
